language: csharp
solution: TensorFlowSharp.sln
script:
  - tsh_version=1.12.0
  - wget "https://www.nuget.org/api/v2/package/TensorFlowSharp/$tsh_version"
  - tar xzvf $tsh_version runtimes
  - dotnet restore $TRAVIS_BUILD_DIR/TensorFlowSharp.sln
  - cd $TRAVIS_BUILD_DIR/
  - msbuild /p:Configuration=Release TensorFlowSharp.sln
  - cp $TRAVIS_BUILD_DIR/runtimes/osx/native/*.dylib $TRAVIS_BUILD_DIR/tests/TensorFlowSharp.Tests/bin/Release/net471/
  - cp -R $TRAVIS_BUILD_DIR/runtimes/osx/native/*.dylib $TRAVIS_BUILD_DIR/tests/TensorFlowSharp.Tests.CSharp/bin/Release/net471/
  - wget "https://www.nuget.org/api/v2/package/xunit.runner.console/2.2.0" -O xunit.runner.console-2.2.0"
  - tar xzvf xunit.runner.console-2.2.0 tools
  - cd $TRAVIS_BUILD_DIR/tools
  - cp "$TRAVIS_BUILD_DIR/tests/TensorFlowSharp.Tests/bin/Release/net471/FSharp.Core.dll" .
  - mono --arch=64 xunit.console.exe "$TRAVIS_BUILD_DIR/tests/TensorFlowSharp.Tests/bin/Release/net471/TensorFlowSharp.Tests.dll" "$TRAVIS_BUILD_DIR/tests/TensorFlowSharp.Tests.CSharp/bin/Release/net471/TensorFlowSharp.Tests.CSharp.dll"
mono: "5.10.0"
dotnet: "2.1.4"
os: "osx"
